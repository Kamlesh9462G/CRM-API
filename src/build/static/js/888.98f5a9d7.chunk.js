"use strict";(self.webpackChunkmy_app=self.webpackChunkmy_app||[]).push([[888],{7769:function(e,n,t){var r=t(8348),o=t(4087),i=t(8288),a=t(3380),l=t(7693),c=t(7521),s=t(4653),d=t(4224),u=t(2791),h=t(7425),x=t(9434),f=t(184);n.Z=function(e){var n=e.handleDelete,t=e.id,m=(0,r.q)(),p=m.isOpen,j=m.onOpen,g=m.onClose,v=u.useRef(null),S=(0,x.v9)((function(e){return e.common})).loading;return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(o.xu,{onClick:j,children:(0,f.jsx)(h.qy0,{color:"red",size:18,cursor:"pointer"})}),(0,f.jsx)(i.a,{isOpen:p,leastDestructiveRef:v,onClose:g,children:(0,f.jsx)(a.Z,{bg:"blackAlpha.300",backdropFilter:"blur(5px) hue-rotate(90deg)",children:(0,f.jsxs)(i._,{children:[(0,f.jsx)(l.x,{fontSize:"lg",fontWeight:"bold",children:"Delete"}),(0,f.jsx)(c.f,{children:"Are you sure? You can't undo this action afterwards."}),(0,f.jsxs)(s.m,{children:[(0,f.jsx)(d.z,{size:"sm",fontWeight:"medium",ref:v,onClick:g,children:"Cancel"}),(0,f.jsx)(d.z,{size:"sm",fontWeight:"medium",isLoading:S,loadingText:"Please wait...",colorScheme:"red",onClick:function(){n(t),g()},ml:3,children:"Delete"})]})]})})})]})}},1605:function(e,n,t){var r=t(3129),o=t(4004),i=t(2893),a=(t(2791),t(6286)),l=t(184);n.Z=function(){return(0,l.jsx)(r.Tr,{height:400,maxHeight:"400px",children:(0,l.jsx)(o.Td,{colSpan:25,children:(0,l.jsx)(i.U,{justifyContent:"center",alignItems:"center",w:"100%",children:(0,l.jsx)(a.NB,{visible:!0,height:"80",width:"80",ariaLabel:"blocks-loading",wrapperStyle:{},wrapperClass:"blocks-wrapper",colors:["#e15b64","#f47e60","#f8b26a","#abbd81","#849b87"]})})})})}},8895:function(e,n,t){t.r(n);var r=t(1413),o=t(4165),i=t(5861),a=t(9439),l=t(3682),c=t(751),s=t(9683),d=t(4087),u=t(9229),h=t(6069),x=t(8886),f=t(311),m=t(7806),p=t(1900),j=t(2732),g=t(553),v=t(3129),S=t(5237),b=t(8500),w=t(4004),y=t(4224),z=t(7161),C=t(6386),D=(t(2978),t(666),t(2791)),T=t(9434),Z=t(7165),k=t(6167),A=t(1605),N=t(745),E=t(1243),R=t(8558),W=t(7769),B=t(3853),_=t(7689),I=t(184);n.default=function(){var e=(0,T.v9)((function(e){return e.common})),n=(e.loading,e.cities),t=e.sources,L=e.statuses,M=e.branches,U=e.courses,O=e.users,Y=(0,T.I0)(),q=(0,_.s0)();(0,D.useEffect)((function(){Y((0,Z.Yu)("branch")),Y((0,Z.Yu)("user")),Y((0,Z.Yu)("source")),Y((0,Z.Yu)("city")),Y((0,Z.Yu)("status")),Y((0,Z.Yu)("course"))}),[]);var P=(0,D.useState)([]),F=(0,a.Z)(P,2),H=F[0],K=F[1],Q=(0,D.useState)(""),X=(0,a.Z)(Q,2),G=X[0],J=X[1],V=(0,D.useState)([]),$=(0,a.Z)(V,2),ee=$[0],ne=$[1],te=(0,D.useState)(""),re=(0,a.Z)(te,2),oe=re[0],ie=re[1],ae=(0,D.useState)([{value:"6369252dd85a641f10cdf4f2",label:"Open"},{value:"6369252dd85a641f10cdf4f6",label:"Final Lead"},{value:"6369252dd85a641f10cdf4f8",label:"Hot Lead"}]),le=(0,a.Z)(ae,2),ce=le[0],se=le[1],de=(0,D.useState)(""),ue=(0,a.Z)(de,2),he=ue[0],xe=ue[1],fe=(0,D.useState)([]),me=(0,a.Z)(fe,2),pe=me[0],je=me[1],ge=(0,D.useState)(""),ve=(0,a.Z)(ge,2),Se=ve[0],be=ve[1],we=(0,D.useState)([]),ye=(0,a.Z)(we,2),ze=ye[0],Ce=ye[1],De=(0,D.useState)(""),Te=(0,a.Z)(De,2),Ze=Te[0],ke=Te[1];console.log(Ze,"ok");var Ae=(0,D.useState)([]),Ne=(0,a.Z)(Ae,2),Ee=Ne[0],Re=Ne[1],We=(0,D.useState)(""),Be=(0,a.Z)(We,2),_e=Be[0],Ie=Be[1],Le=(0,D.useState)([]),Me=(0,a.Z)(Le,2),Ue=Me[0],Oe=Me[1],Ye=(0,D.useState)(1),qe=(0,a.Z)(Ye,2),Pe=qe[0],Fe=qe[1],He=(0,D.useState)(1),Ke=(0,a.Z)(He,2),Qe=Ke[0],Xe=Ke[1],Ge=(0,D.useState)(!1),Je=(0,a.Z)(Ge,2),Ve=Je[0],$e=Je[1],en=(0,D.useState)(""),nn=(0,a.Z)(en,2),tn=nn[0],rn=nn[1],on=(0,D.useState)(100),an=(0,a.Z)(on,2),ln=an[0],cn=an[1],sn=(0,D.useState)([{startDate:null,endDate:null,key:"selection"}]),dn=(0,a.Z)(sn,2),un=dn[0],hn=dn[1],xn=(0,D.useState)([{startDate:null,endDate:null,key:"selection"}]),fn=(0,a.Z)(xn,2),mn=fn[0],pn=fn[1],jn=(0,D.useState)(!1),gn=(0,a.Z)(jn,2),vn=gn[0],Sn=gn[1],bn=(0,D.useState)(!1),wn=(0,a.Z)(bn,2),yn=wn[0],zn=wn[1],Cn=(0,D.useRef)(null),Dn=(0,D.useRef)(null),Tn=function(e){"Escape"===e.key&&(Sn(!1),zn(!1))},Zn=function(e){Cn.current&&!Cn.current.contains(e.target)&&Sn(!1),Dn.current&&!Dn.current.contains(e.target)&&zn(!1)};(0,D.useEffect)((function(){return document.addEventListener("keydown",Tn),document.addEventListener("mousedown",Zn),function(){document.removeEventListener("keydown",Tn),document.removeEventListener("mousedown",Zn)}}),[]);var kn=null===n||void 0===n?void 0:n.map((function(e){return{value:e._id,label:e.CityName}})),An=null===t||void 0===t?void 0:t.map((function(e){return{value:e._id,label:e.SourceName}})),Nn=null===L||void 0===L?void 0:L.map((function(e){return{value:e._id,label:e.StatusName}})),En=null===M||void 0===M?void 0:M.map((function(e){return{value:e._id,label:e.BranchName}})),Rn=null===U||void 0===U?void 0:U.map((function(e){return{value:e._id,label:e.CourseName}})),Wn=null===O||void 0===O?void 0:O.map((function(e){return{value:e._id,label:e.Name}}));"https://crm-new.toppersmaterial.com/v1/admin/lead/?City=".concat(G,"&Source=").concat(oe,"&Status=").concat(he,"&Branch=").concat(Se,"&AssignTo=").concat(_e,"&enquiryCourse=").concat(Ze,"&limit=").concat(ln,"&page=").concat(Pe,"&keyword=").concat(tn);var Bn=un[0].startDate?(0,R.Z)(un[0].startDate):"",_n=(new Date(Bn),function(){var e=(0,i.Z)((0,o.Z)().mark((function e(){var n,t,r;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,$e(!0),n=localStorage.getItem("token"),t="https://crm-new.toppersmaterial.com/v1/admin/lead/?City=".concat(G,"&Source=").concat(oe,"&Status=").concat(he,"&Branch=").concat(Se,"&AssignTo=").concat(_e,"&Course=").concat(Ze,"&limit=").concat(ln,"&page=").concat(Pe,"&keyword=").concat(tn),e.next=6,E.Z.get(t,{headers:{Authorization:"Bearer ".concat(n)}});case 6:r=e.sent,Oe(r.data.Data),Xe(r.data.totalPages),$e(!1),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(0),$e(!1),console.error(e.t0);case 16:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(){return e.apply(this,arguments)}}()),In=function(e,n){var t;return function(){for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];clearTimeout(t),t=setTimeout((function(){return e.apply(void 0,o)}),n)}}(_n,1e3);(0,D.useEffect)((function(){In()}),[G,oe,he,Se,_e,Ze,Pe,ln,un,mn]);var Ln=function(e){e<1||e>Qe||Fe(e)},Mn=(0,l.p)(),Un=function(){var e=(0,i.Z)((0,o.Z)().mark((function e(n){return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Y((0,Z.SR)(n,"lead",Mn));case 2:_n();case 3:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return(0,I.jsxs)(c.K,{children:[(0,I.jsx)(c.K,{py:"1",bg:"whiteAlpha.900",borderRadius:"0.25rem",children:(0,I.jsxs)(s.M,{columns:{sm:2,md:3,lg:4},gap:"0.5rem",px:"2",children:[(0,I.jsxs)(d.xu,{children:[(0,I.jsx)(u.x,{fontSize:"0.8rem",ml:"2",mb:"0.1",fontWeight:"500",color:"black.600",children:"City"}),(0,I.jsx)(k.NU,{className:"rmsc",options:kn,value:H,onChange:function(e){K(e),J(null===e||void 0===e?void 0:e.map((function(e){return e.label})).join(","))},labelledBy:"Select City"})]}),(0,I.jsxs)(d.xu,{children:[(0,I.jsx)(u.x,{fontSize:"0.8rem",ml:"2",mb:"0.1",fontWeight:"500",color:"black.600",children:"Source"}),(0,I.jsx)(k.NU,{className:"rmsc",options:An,value:ee,onChange:function(e){ne(e),console.log(e),ie(null===e||void 0===e?void 0:e.map((function(e){return e.label})).join(","))},labelledBy:"Select Source"})]}),(0,I.jsxs)(d.xu,{children:[(0,I.jsx)(u.x,{fontSize:"0.8rem",ml:"2",mb:"0.1",fontWeight:"500",color:"black.600",children:"Status"}),(0,I.jsx)(k.NU,{className:"rmsc",options:Nn,value:ce,onChange:function(e){se(e),console.log(e),xe(null===e||void 0===e?void 0:e.map((function(e){return e.label})).join(","))},labelledBy:"Select Source"})]}),(0,I.jsxs)(d.xu,{children:[(0,I.jsx)(u.x,{fontSize:"0.8rem",ml:"2",mb:"0.1",fontWeight:"500",color:"black.600",children:"Branch"}),(0,I.jsx)(k.NU,{className:"rmsc",options:En,value:pe,onChange:function(e){je(e),console.log(e),be(null===e||void 0===e?void 0:e.map((function(e){return e.label})).join(","))},labelledBy:"Select Source"})]}),(0,I.jsxs)(d.xu,{children:[(0,I.jsx)(u.x,{fontSize:"0.8rem",ml:"2",mb:"0.1",fontWeight:"500",color:"black.600",children:"Course"}),(0,I.jsx)(k.NU,{className:"rmsc",options:Rn,value:ze,onChange:function(e){Ce(e),console.log(e),ke(null===e||void 0===e?void 0:e.map((function(e){return e.label})).join(","))},labelledBy:"Select course"})]}),(0,I.jsxs)(d.xu,{children:[(0,I.jsx)(u.x,{fontSize:"0.8rem",ml:"2",mb:"",fontWeight:"500",color:"black.600",children:"Assign To"}),(0,I.jsx)(k.NU,{className:"rmsc",options:Wn,value:Ee,onChange:function(e){Re(e),console.log(e),Ie(null===e||void 0===e?void 0:e.map((function(e){return e.label})).join(","))},labelledBy:"Select user"})]}),(0,I.jsx)(d.xu,{children:(0,I.jsxs)("div",{className:"calendarWrap",children:[(0,I.jsx)(u.x,{fontSize:"0.8rem",ml:"2",mb:"",fontWeight:"500",color:"black.600",children:"Follow Up Date"}),(0,I.jsx)(h.I,{borderColor:"#A0AEC0",size:"sm",borderRadius:"0.25rem",w:"full",h:"27px",placeholder:"Select date",value:un[0].startDate&&un[0].endDate?"".concat((0,C.default)(un[0].startDate,"dd/MM/yyyy")," to ").concat((0,C.default)(un[0].endDate,"dd/MM/yyyy")):"",readOnly:!0,onClick:function(){return Sn((function(e){return!e}))}}),(0,I.jsx)("div",{ref:Cn,children:vn&&(0,I.jsx)(z.C0,{onChange:function(e){return hn([e.selection])},editableDateInputs:!0,moveRangeOnFirstSelection:!1,ranges:un.map((function(e){return(0,r.Z)((0,r.Z)({},e),{},{startDate:e.startDate||void 0,endDate:e.endDate||void 0})})),direction:"horizontal",className:"calendarElement"})})]})}),(0,I.jsx)(d.xu,{children:(0,I.jsxs)("div",{className:"calendarWrap",children:[(0,I.jsx)(u.x,{fontSize:"0.8rem",ml:"2",mb:"",fontWeight:"500",color:"black.600",children:"Enquiry Date"}),(0,I.jsx)(h.I,{borderColor:"#A0AEC0",size:"sm",borderRadius:"0.25rem",w:"full",h:"27px",placeholder:"Select date",value:mn[0].startDate&&mn[0].endDate?"".concat((0,C.default)(mn[0].startDate,"dd/MM/yyyy")," to ").concat((0,C.default)(mn[0].endDate,"dd/MM/yyyy")):"",readOnly:!0,onClick:function(){return zn((function(e){return!e}))}}),(0,I.jsx)("div",{ref:Dn,children:yn&&(0,I.jsx)(z.C0,{onChange:function(e){return pn([e.selection])},editableDateInputs:!0,moveRangeOnFirstSelection:!1,ranges:mn.map((function(e){return(0,r.Z)((0,r.Z)({},e),{},{startDate:e.startDate||void 0,endDate:e.endDate||void 0})})),direction:"horizontal",className:"calendarElement"})})]})})]})}),(0,I.jsxs)(c.K,{py:"1",bg:"whiteAlpha.900",borderRadius:"0.25rem",children:[(0,I.jsxs)(d.xu,{px:"4",display:"flex",justifyContent:"space-between",alignItems:"center",children:[(0,I.jsx)(d.xu,{children:(0,I.jsxs)(x.P,{borderRadius:"0.25rem",borderColor:"gray.400",size:"xs",value:ln,onChange:function(e){return cn(parseInt(e.target.value,10))},children:[(0,I.jsx)("option",{value:20,children:"20"}),(0,I.jsx)("option",{value:50,children:"50"}),(0,I.jsx)("option",{value:100,children:"100"}),(0,I.jsx)("option",{value:200,children:"200"})]})}),(0,I.jsx)(d.xu,{children:(0,I.jsxs)(f.B,{children:[(0,I.jsx)(m.Z,{pointerEvents:"none",children:(0,I.jsx)(N.W,{color:"gray.400",mb:"4"})}),(0,I.jsx)(h.I,{value:tn,onChange:function(e){rn(e.target.value),In()},borderRadius:"0.25rem",borderColor:"gray.400",size:"xs",type:"text",placeholder:"Search here..."})]})})]}),(0,I.jsx)(d.xu,{overflowX:"auto",className:"shrinkable-table",children:(0,I.jsx)(p.x,{className:"tarun",whiteSpace:"nowrap",children:(0,I.jsx)(d.xu,{overflowY:"auto",height:350,maxHeight:"350px",children:(0,I.jsxs)(j.i,{variant:"striped",colorScheme:"gray",size:"sm",children:[(0,I.jsx)(g.h,{bg:"blue.600",color:"whiteAlpha.900",position:"sticky",borderRadius:"20px",top:"0",children:(0,I.jsxs)(v.Tr,{children:[(0,I.jsx)(S.Th,{padding:2,w:15,fontSize:"0.65rem",color:"whiteAlpha.900",children:"UID"}),(0,I.jsx)(S.Th,{padding:2,w:15,fontSize:"0.65rem",color:"whiteAlpha.900",children:"Ass To"}),(0,I.jsx)(S.Th,{padding:2,w:15,fontSize:"0.65rem",color:"whiteAlpha.900",children:"Source"}),(0,I.jsx)(S.Th,{padding:2,w:15,fontSize:"0.65rem",color:"whiteAlpha.900",children:"City"}),(0,I.jsx)(S.Th,{padding:2,w:15,fontSize:"0.65rem",color:"whiteAlpha.900",children:"Status"}),(0,I.jsx)(S.Th,{padding:2,w:15,fontSize:"0.65rem",color:"whiteAlpha.900",children:"Enq. Date"}),(0,I.jsx)(S.Th,{padding:2,w:15,fontSize:"0.65rem",color:"whiteAlpha.900",children:"Lfd"}),(0,I.jsx)(S.Th,{padding:2,w:15,fontSize:"0.65rem",color:"whiteAlpha.900",children:"Name"}),(0,I.jsx)(S.Th,{padding:2,w:15,fontSize:"0.65rem",color:"whiteAlpha.900",children:"Mob_1"}),(0,I.jsx)(S.Th,{padding:2,w:15,fontSize:"0.65rem",color:"whiteAlpha.900",children:"course"}),(0,I.jsx)(S.Th,{padding:2,w:15,fontSize:"0.65rem",color:"whiteAlpha.900",children:"Price"}),(0,I.jsx)(S.Th,{padding:2,w:15,fontSize:"0.65rem",color:"whiteAlpha.900",children:"Days"}),(0,I.jsx)(S.Th,{padding:2,w:15,fontSize:"0.65rem",color:"whiteAlpha.900",children:"follow up"}),(0,I.jsx)(S.Th,{padding:2,w:15,fontSize:"0.65rem",color:"whiteAlpha.900",children:"Action"})]})}),Ve?(0,I.jsx)(A.Z,{}):(0,I.jsx)(b.p,{children:0===(null===Ue||void 0===Ue?void 0:Ue.length)?(0,I.jsx)(v.Tr,{children:(0,I.jsx)(w.Td,{colSpan:14,textAlign:"center",fontWeight:700,children:"No data found"})}):null===Ue||void 0===Ue?void 0:Ue.map((function(e){return(0,I.jsxs)(v.Tr,{fontSize:"0.5rem",children:[(0,I.jsx)(w.Td,{fontSize:"0.8rem",padding:2,w:15,children:e.UID}),(0,I.jsx)(w.Td,{fontSize:"0.8rem",padding:2,w:15,children:e.AssignTo}),(0,I.jsx)(w.Td,{fontSize:"0.8rem",padding:2,w:15,children:e.Source}),(0,I.jsx)(w.Td,{fontSize:"0.8rem",padding:2,w:15,children:e.City}),(0,I.jsx)(w.Td,{fontSize:"0.8rem",padding:2,w:15,children:e.Status}),(0,I.jsx)(w.Td,{fontSize:"0.8rem",padding:2,w:15,children:new Date(e.EnquiryDate).toLocaleDateString()}),(0,I.jsx)(w.Td,{fontSize:"0.8rem",textAlign:"center",padding:2,w:15,children:e.Days2}),(0,I.jsx)(w.Td,{fontSize:"0.8rem",padding:2,w:15,children:e.Name}),(0,I.jsx)(w.Td,{fontSize:"0.8rem",padding:2,w:15,children:e.Phone1}),(0,I.jsx)(w.Td,{fontSize:"0.8rem",padding:2,w:15,textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap",children:e.Course}),(0,I.jsx)(w.Td,{fontSize:"0.8rem",padding:2,w:15,children:e.CoursePrice}),(0,I.jsxs)(w.Td,{fontSize:"0.8rem",padding:2,w:15,children:[" ","-180"]}),(0,I.jsx)(w.Td,{fontSize:"0.8rem",padding:2,w:15,children:new Date(e.EnquiryDate).toLocaleDateString()}),(0,I.jsxs)(w.Td,{textAlign:"center",fontSize:"0.8rem",w:15,children:[" ",(0,I.jsxs)(d.xu,{display:"flex",gap:"2",children:[(0,I.jsx)(B.vPQ,{color:"blue",size:16,cursor:"pointer",onClick:function(){return q("/log/".concat(e._id))}}),(0,I.jsx)(W.Z,{id:e._id,handleDelete:Un})]})]})]},e._id)}))})]})})})}),(0,I.jsxs)(d.xu,{display:"flex",justifyContent:"flex-end",gap:"3",px:3,borderTop:"1px gray.500",children:[(0,I.jsx)(y.z,{size:"xs",onClick:function(){return Ln(Pe-1)},colorScheme:"gray",disabled:1===Pe,borderRadius:"50%",p:"0.5rem 0",children:"<"}),Array.from({length:Qe},(function(e,n){return n+1})).map((function(e){return e<=3||e>=Pe-1&&e<=Pe+1||e>Qe-3?(0,I.jsx)(y.z,{size:"xs",borderRadius:"50%",p:"0.5rem 0",onClick:function(){return Ln(e)},disabled:Pe===e,colorScheme:Pe===e?"orange":"gray",children:e},e):4===e||e===Qe-2?(0,I.jsx)(u.x,{children:"..."},e):null})),(0,I.jsx)(y.z,{size:"xs",borderRadius:"50%",p:"0.5rem 0",onClick:function(){return Ln(Pe+1)},disabled:Pe===Qe,children:">"})]})]})]})}}}]);
//# sourceMappingURL=888.98f5a9d7.chunk.js.map